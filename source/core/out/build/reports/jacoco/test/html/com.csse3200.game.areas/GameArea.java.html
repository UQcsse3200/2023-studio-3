<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GameArea.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">core</a> &gt; <a href="index.source.html" class="el_package">com.csse3200.game.areas</a> &gt; <span class="el_source">GameArea.java</span></div><h1>GameArea.java</h1><pre class="source lang-java linenums">package com.csse3200.game.areas;

import com.badlogic.gdx.math.GridPoint2;
import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.utils.Disposable;
import com.csse3200.game.areas.terrain.TerrainComponent;
import com.csse3200.game.entities.Entity;
import com.csse3200.game.services.ServiceLocator;

import java.util.ArrayList;
import java.util.List;

/**
 * Represents an area in the game, such as a level, indoor area, etc. An area has a terrain and
 * other entities to spawn on that terrain.
 *
 * &lt;p&gt;Support for enabling/disabling game areas could be added by making this a Component instead.
 */
public abstract class GameArea implements Disposable {
  protected TerrainComponent terrain;
  protected List&lt;Entity&gt; areaEntities;

<span class="fc" id="L23">  protected GameArea() {</span>
<span class="fc" id="L24">    areaEntities = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L25">  }</span>

  /** Create the game area in the world. */
  public abstract void create();

  /** Dispose of all internal entities in the area */
  public void dispose() {
<span class="fc bfc" id="L32" title="All 2 branches covered.">    for (Entity entity : areaEntities) {</span>
<span class="fc" id="L33">      entity.dispose();</span>
<span class="fc" id="L34">    }</span>
<span class="fc" id="L35">  }</span>

  /**
   * Spawn entity at its current position
   *
   * @param entity Entity (not yet registered)
   */
  protected void spawnEntity(Entity entity) {
<span class="fc" id="L43">    areaEntities.add(entity);</span>
<span class="fc" id="L44">    ServiceLocator.getEntityService().register(entity);</span>
<span class="fc" id="L45">  }</span>

  /**
   * Spawn entity on a given tile. Requires the terrain to be set first.
   *
   * @param entity Entity (not yet registered)
   * @param tilePos tile position to spawn at
   * @param centerX true to center entity X on the tile, false to align the bottom left corner
   * @param centerY true to center entity Y on the tile, false to align the bottom left corner
   */
  protected void spawnEntityAt(
          Entity entity, GridPoint2 tilePos, boolean centerX, boolean centerY) {
<span class="nc" id="L57">    Vector2 worldPos = terrain.tileToWorldPosition(tilePos);</span>
<span class="nc" id="L58">    float tileSize = terrain.getTileSize();</span>

<span class="nc bnc" id="L60" title="All 2 branches missed.">    if (centerX) {</span>
<span class="nc" id="L61">      worldPos.x += (tileSize / 2) - entity.getCenterPosition().x;</span>
    }
<span class="nc bnc" id="L63" title="All 2 branches missed.">    if (centerY) {</span>
<span class="nc" id="L64">      worldPos.y += (tileSize / 2) - entity.getCenterPosition().y;</span>
    }

<span class="nc" id="L67">    entity.setPosition(worldPos);</span>
<span class="nc" id="L68">    spawnEntity(entity);</span>
<span class="nc" id="L69">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>