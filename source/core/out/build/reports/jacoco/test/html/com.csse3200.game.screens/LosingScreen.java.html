<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LosingScreen.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">core</a> &gt; <a href="index.source.html" class="el_package">com.csse3200.game.screens</a> &gt; <span class="el_source">LosingScreen.java</span></div><h1>LosingScreen.java</h1><pre class="source lang-java linenums">package com.csse3200.game.screens;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.ScreenAdapter;
import com.badlogic.gdx.audio.Sound;
import com.badlogic.gdx.graphics.GL20;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.BitmapFont;
import com.badlogic.gdx.graphics.g2d.Sprite;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.scenes.scene2d.InputEvent;
import com.badlogic.gdx.scenes.scene2d.Stage;
import com.badlogic.gdx.scenes.scene2d.ui.Skin;
import com.badlogic.gdx.scenes.scene2d.ui.Table;
import com.badlogic.gdx.scenes.scene2d.ui.TextButton;
import com.badlogic.gdx.scenes.scene2d.utils.ClickListener;
import com.badlogic.gdx.utils.viewport.ScreenViewport;
import com.csse3200.game.GdxGame;
import com.csse3200.game.screens.text.AnimatedText;
import com.csse3200.game.services.ResourceService;
import com.csse3200.game.services.ServiceLocator;

public class LosingScreen extends ScreenAdapter {
    private final GdxGame game;
    private SpriteBatch batch;
    private Texture introImage;
    private Sprite introSprite;

    private static final String TEXTURE = &quot;planets/background.png&quot;;
    private static final String INTRO_TEXT = &quot;&quot;&quot;
            The aliens gained control. You lose!
            &quot;&quot;&quot;;
<span class="nc" id="L33">    private static final String[] lossSounds = {&quot;sounds/background/loss/RisingScreams.ogg&quot;};</span>
    private BitmapFont font;
    private AnimatedText text;
    private Stage stage;
    private ResourceService resourceService;
    private TextButton exitButton;
    private TextButton mainMenuButton;
    private TextButton playAgainButton;

<span class="nc" id="L42">    public LosingScreen(GdxGame game) {</span>
<span class="nc" id="L43">        this.game = game;</span>
<span class="nc" id="L44">        font = new BitmapFont();</span>
<span class="nc" id="L45">        text = new AnimatedText(INTRO_TEXT, font, 0.05f);</span>
<span class="nc" id="L46">        font.getData().setScale(2, 2);</span>
<span class="nc" id="L47">        resourceService = new ResourceService();</span>
<span class="nc" id="L48">        ServiceLocator.registerResourceService(resourceService);</span>
<span class="nc" id="L49">        resourceService.loadSounds(lossSounds);</span>
<span class="nc" id="L50">        resourceService.loadAll();</span>
<span class="nc" id="L51">    }</span>

    @Override
    public void show() {
<span class="nc" id="L55">        batch = new SpriteBatch();</span>
<span class="nc" id="L56">        introImage = new Texture(TEXTURE);</span>
<span class="nc" id="L57">        introSprite = new Sprite(introImage);</span>
<span class="nc" id="L58">        introSprite.setSize(Gdx.graphics.getWidth(), Gdx.graphics.getHeight());</span>

<span class="nc" id="L60">        stage = new Stage(new ScreenViewport());</span>
<span class="nc" id="L61">        Gdx.input.setInputProcessor(stage);</span>

<span class="nc" id="L63">        Skin skin = new Skin(Gdx.files.internal(&quot;images/ui/buttons/glass.json&quot;));</span>
<span class="nc" id="L64">        exitButton = new TextButton(&quot;Exit Game&quot;, skin);</span>
<span class="nc" id="L65">        exitButton.addListener(new ClickListener(){</span>
            public void clicked(InputEvent even, float x, float y) {
<span class="nc" id="L67">                game.exit();</span>
<span class="nc" id="L68">            }</span>
        });
<span class="nc" id="L70">        mainMenuButton = new TextButton(&quot;Back to Main Menu&quot;, skin);</span>
<span class="nc" id="L71">        mainMenuButton.addListener(new ClickListener() {</span>
            @Override
            public void clicked(InputEvent event, float x, float y) {
<span class="nc" id="L74">                game.setScreen(GdxGame.ScreenType.MAIN_MENU);</span>
<span class="nc" id="L75">            }</span>

        });

<span class="nc" id="L79">        playAgainButton = new TextButton(&quot;Play Again&quot;, skin);</span>
<span class="nc" id="L80">        playAgainButton.addListener(new ClickListener() {</span>
            public void clicked(InputEvent even, float x, float y) {
<span class="nc" id="L82">                game.setScreen(GdxGame.ScreenType.LEVEL_SELECT);</span>
<span class="nc" id="L83">            }</span>
        });
<span class="nc" id="L85">        Table table = new Table();</span>
<span class="nc" id="L86">        table.setFillParent(true);</span>
<span class="nc" id="L87">        table.add(exitButton).padTop(-100).row();</span>
<span class="nc" id="L88">        table.add(mainMenuButton).padTop(-200).row();</span>
<span class="nc" id="L89">        table.add(playAgainButton).padTop(-300).row();</span>
<span class="nc" id="L90">        stage.addActor(table);</span>
        // play loss sound
<span class="nc" id="L92">        resourceService.getAsset(lossSounds[0], Sound.class).play(0.3f);</span>
<span class="nc" id="L93">    }</span>

    @Override
    public void render(float delta) {
<span class="nc" id="L97">        Gdx.gl.glClearColor(0, 0, 0, 1);</span>
<span class="nc" id="L98">        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</span>

<span class="nc" id="L100">        batch.begin();</span>
<span class="nc" id="L101">        introSprite.draw(batch);</span>
<span class="nc" id="L102">        text.update();</span>
<span class="nc" id="L103">        text.draw(batch, 730, 800); // Adjust the position</span>
<span class="nc" id="L104">        batch.end();</span>

<span class="nc" id="L106">        stage.draw();</span>
<span class="nc" id="L107">    }</span>

    @Override
    public void dispose() {
<span class="nc" id="L111">        batch.dispose();</span>
<span class="nc" id="L112">        introImage.dispose();</span>
<span class="nc" id="L113">        stage.dispose();</span>
<span class="nc" id="L114">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>