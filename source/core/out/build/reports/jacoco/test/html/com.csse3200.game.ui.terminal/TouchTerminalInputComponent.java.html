<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TouchTerminalInputComponent.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">core</a> &gt; <a href="index.source.html" class="el_package">com.csse3200.game.ui.terminal</a> &gt; <span class="el_source">TouchTerminalInputComponent.java</span></div><h1>TouchTerminalInputComponent.java</h1><pre class="source lang-java linenums">package com.csse3200.game.ui.terminal;

import com.badlogic.gdx.InputProcessor;
import com.csse3200.game.input.InputComponent;

/**
 * Input handler for the debug terminal for keyboard and touch (mouse) input.
 * This input handler uses keyboard and touch input.
 *
 * &lt;p&gt;The debug terminal can be opened and closed by scrolling vertically and a message can be entered via
 * the keyboard.
 */
public class TouchTerminalInputComponent extends InputComponent {
  private Terminal terminal;

  public TouchTerminalInputComponent() {
<span class="fc" id="L17">    super(10);</span>
<span class="fc" id="L18">  }</span>

  public TouchTerminalInputComponent(Terminal terminal) {
<span class="fc" id="L21">    this();</span>
<span class="fc" id="L22">    this.terminal = terminal;</span>
<span class="fc" id="L23">  }</span>


  @Override
  public void create() {
<span class="nc" id="L28">    super.create();</span>
<span class="nc" id="L29">    terminal = entity.getComponent(Terminal.class);</span>
<span class="nc" id="L30">  }</span>

  /**
   * Handles input if the terminal is open. This is because keyDown events are
   * triggered alongside keyTyped events. If the user is typing in the terminal, the input shouldn't
   * trigger any other input handlers.
   *
   * @return whether the input was processed
   * @see InputProcessor#keyDown(int)
   */
  @Override
  public boolean keyDown(int keycode) {
<span class="nc" id="L42">    return terminal.isOpen();</span>
  }

  /**
   * Handles input if the terminal is open. If 'enter' is typed, the entered message will be
   * processed, otherwise the message will be updated with the new character.
   *
   * @return whether the input was processed
   * @see InputProcessor#keyTyped(char)
   */
  @Override
  public boolean keyTyped(char character) {
<span class="nc bnc" id="L54" title="All 2 branches missed.">    if (!terminal.isOpen()) {</span>
<span class="nc" id="L55">      return false;</span>
    }

<span class="nc bnc" id="L58" title="All 2 branches missed.">    if (character == '\b') {</span>
<span class="nc" id="L59">      terminal.handleBackspace();</span>
<span class="nc" id="L60">      return true;</span>
<span class="nc bnc" id="L61" title="All 4 branches missed.">    } else if (character == '\r' || character == '\n') {</span>
<span class="nc bnc" id="L62" title="All 2 branches missed.">      if (terminal.processMessage()) {</span>
<span class="nc" id="L63">        terminal.toggleIsOpen();</span>
      }
<span class="nc" id="L65">      terminal.setEnteredMessage(&quot;&quot;);</span>
<span class="nc" id="L66">      return true;</span>
<span class="nc bnc" id="L67" title="All 4 branches missed.">    } else if(Character.isLetterOrDigit(character) || character == ' ') {</span>
      // append character to message
<span class="nc" id="L69">      terminal.appendToMessage(character);</span>
<span class="nc" id="L70">      return true;</span>
    }
<span class="nc" id="L72">    return false;</span>
  }

  /**
   * Handles input if the terminal is open. This is because keyUp events are
   * triggered alongside keyTyped events. If the user is typing in the terminal, the input shouldn't
   * trigger any other input handlers.
   *
   * @return whether the input was processed
   * @see InputProcessor#keyUp(int)
   */
  @Override
  public boolean keyUp(int keycode) {
<span class="nc" id="L85">    return terminal.isOpen();</span>
  }

  /**
   * Scrolling up will open the terminal and scrolling down will close the terminal.
   *
   * @return whether the input was processed
   * @see InputProcessor#scrolled(float, float)
   */
  @Override
  public boolean scrolled(float amountX, float amountY) {
<span class="fc bfc" id="L96" title="All 2 branches covered.">    if (amountY &lt; 0) {</span>
<span class="fc" id="L97">      terminal.setOpen();</span>
<span class="pc bpc" id="L98" title="1 of 2 branches missed.">    } else if (amountY &gt; 0) {</span>
<span class="fc" id="L99">      terminal.setClosed();</span>
    }
<span class="fc" id="L101">    return true;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>